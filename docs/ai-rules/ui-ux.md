# UI/UX 完整规范

> 本文档是 `AGENTS.md` 的补充，包含 UI/UX 设计范式、布局策略、游戏 UI 特化规范。
> **触发条件**：开发/修改 UI 组件、布局、样式、游戏界面时阅读。

---

## 0. 大规模 UI 改动前置流程（强制）

> **当任务涉及大规模 UI 改动**（新增页面/重做布局/全局风格调整/新游戏 UI 搭建）时，必须按以下顺序执行：
>
> 1. **先读 Skill**：执行 `.windsurf/skills/ui-ux-pro-max/SKILL.md` 中的 `--design-system` 流程，获取通用设计建议（配色/字体/风格/反模式）。
> 2. **再读项目自定义设计系统**：
>    - `design-system/game-ui/MASTER.md` — 游戏 UI 交互通用原则
>    - `design-system/styles/<风格>.md` — 对应视觉风格规范
>    - `design-system/games/<gameId>.md` — 游戏专属覆盖配置（若存在）
> 3. **冲突时以项目自定义设计系统为准**：Skill 提供的是通用建议，项目 `design-system/` 是权威来源；两者冲突时，以后者为准。
>
> **判定"大规模 UI 改动"**：涉及 ≥3 个组件文件的样式变更、新增整页/整区域布局、全局配色/字体/间距调整、新游戏 Board 搭建。
> **UI 优化任务**（布局稳定性修复、字号/间距层级调整、视觉层级重构等）也须走此流程。
> **小改动**（单按钮样式/单组件微调）无需走此流程，但仍需遵守 `design-system/` 中的约束。

---

## 1. 核心审美准则 (Visual Excellence)

- **深度感 (Depth)**：通过渐变、阴影、毛玻璃构建视觉层级，但需按场景分级使用：
  - **重点区域**（游戏结算、核心面板）：可使用毛玻璃 + 软阴影增强层级感
  - **一般区域**（确认弹窗、列表项）：使用纯色/简单渐变 + 轻阴影即可
  - **高频更新区域**（动画中元素、拖拽对象）：**禁止毛玻璃**，仅用 `opacity`/`transform`
- **动效反馈 (Motion)**：状态变更应有动效反馈，但需区分场景：
  - **关键交互**（确认/提交/阶段转换）：使用物理动效（弹簧/惯性）
  - **常规交互**（Hover/Focus）：使用简单 `transition`（150-200ms）
  - **高频交互**（快速点击/连续操作）：仅用颜色/透明度变化，禁止复杂动画
- **布局稳定性 (Layout)**：动态内容通过 `absolute` 或预留空间实现。**辅助按钮严禁占据核心业务流空间，必须以悬浮 (Overlay) 方式贴边/贴底显示。**
- **数据/逻辑/UI 分离（强制）**：UI 只负责展示与交互，业务逻辑放在引擎/系统/领域层，数据定义与配置（manifest、常量表、资源清单、文案 key）用纯数据文件维护。

---

## 2. 多端布局策略 (Multi-Device Layout Strategy)

- **PC 核心驱动 (PC-First)**：以 PC 端 (16:9) 为核心设计基准，追求极致的大屏沉浸感与专业级交互操作。
- **场景自适应 (Scene-Centric)**：针对游戏内核进行自适应优化。移动端定位为"尽力兼容 (Best-effort Compatibility)"，优先保证核心功能可用。
- **宽限度约束 (Constraints)**：平台/网页 UI 通过 `max-w-7xl` 等容器限制内容延展，确保视觉焦点集中。
- **响应式策略指南 (Responsive Strategy Guidelines)**：
    - **信息交互层 (UI & HUD)**：
        - **场景**：大厅卡片、侧边栏、模态框、文字阅读区。
        - **建议**：**稳定性优先**。推荐使用标准 `rem`，建议配合 `clamp()` 锁定物理最小值（12px/14px），保证全环境可读。
    - **沉浸视效层 (Immersive & Board)**：
        - **场景**：游戏棋盘、全屏背景、核心对战区域。
        - **建议**：**比例优先**。推荐使用 `vw/vh`、`%` 或 `aspect-ratio`，确保游戏画面能完整填充用户视口，保持沉浸感。
    - **布局流动层 (Layout Flow)**：
        - **场景**：列表网格、工具栏排列。
        - **建议**：**内容驱动**。利用 Flex/Grid 的自然流特性（如自动填充、自动换行）来适配屏幕宽度，而非依赖硬编码的断点控制。

---

## 3. 游戏 UI 特化范式 (Game-Centric Design)

> **⚠️ 游戏内 UI 必须遵循设计系统规范**
> 
> - **交互原则**：`design-system/game-ui/MASTER.md`（所有游戏通用）
> - **视觉风格**：`design-system/styles/` 下选择合适风格
>   - `arcade-3d.md` - 街机立体风（休闲、派对、骰子类）
>   - `tactical-clean.md` - 战术简洁风（策略、卡牌对战）
>   - `classic-parchment.md` - 经典羊皮纸风（复古、桌游模拟）
> 
> **核心要求**：游戏感 = 即时反馈 + 状态清晰 + 操作愉悦
> - 所有可交互元素必须有 hover/press 反馈
> - 禁用状态必须视觉明显
> - 动画只用 transform/opacity，时长 150-300ms

- **动态提示 UI（强制）**：
    - 必须使用 `absolute`/`fixed`，禁止占用布局空间（如 `relative/static`）。
    - 出现/消失不得挤压或移动其他 UI；新增前必须验证布局稳定性（尤其右侧栏/手牌区/技能区等核心区）。
    - **层级统一**：使用 `UI_Z_INDEX` 常量（如提示用 `UI_Z_INDEX.hint/overlayRaised`，模态用 `UI_Z_INDEX.modalOverlay/modalContent`），禁止硬编码 `z-[...]`。
    - 常用位置：顶部中央（交互选择）、正中央（等待）、手牌上方（弃牌）；默认 `pointer-events-none`（除非需要交互）。
- **视角解耦 (Scene vs. HUD)**：
    - **场景层 (Scene)**：棋盘、卡片等核心实体，需通过 `anchorPoint` 处理坐标缩放，确保跨平台逻辑一致性。
    - **UI 层 (HUD)**：状态信息、控制面板，执行 Overlay 挂载逻辑。
- **高度稳定性**：核心游戏区（棋盘/面板）**必须**使用明确高度约束（如 `h-[35vw]`）代替 `h-full`，彻底解耦父级 Flex 依赖。
- **相位敏感性**：UI 必须清晰反馈当前"游戏相位"与"操作权限"，通过高亮合规动作 (Valid Actions) 降低认知负荷。
