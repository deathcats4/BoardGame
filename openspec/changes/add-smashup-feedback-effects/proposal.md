# Change: 大杀四方交互反馈与特效系统

## Why
大杀四方目前 UI 骨架已成型（"Paper Chaos" 桌游纸质风格），手牌区有基础的 hover/选中反馈，但核心游戏循环（出牌→基地记分→抽牌）缺乏过程动画和状态变化反馈，导致操作感平淡、关键时刻（记分/VP 颁发）缺乏仪式感。

## 设计原则
- **纸质桌游感优先**：所有特效应符合"桌游之夜"的物理质感（卡牌拍桌、纸片飞舞、手写浮字），不使用数字化光效
- **不照搬其他游戏**：大杀四方没有直接攻击/伤害概念，核心是"争夺基地"，反馈围绕出牌、力量变化、记分展开
- **framer-motion 为主**：利用项目已有的 framer-motion，仅在记分庆祝等场景考虑 tsParticles

## 已有反馈（不重复实现）
- 手牌 hover 上浮 + 放大 + 旋转归零（spring 弹簧动画）
- 手牌选中高亮（cyan ring + glow shadow）
- 手牌进出场动画（AnimatePresence + initial/exit）
- 弃牌模式选中标记（红色 ring + grayscale + "Discard" badge）
- 基地部署模式高亮（ring-green-400 + scale-105 + glow）
- 随从卡 hover 放大 + 旋转归零
- 基地力量达到临界点时 animate-pulse（仅文字颜色）
- 卡牌详情弹出动画（scale + y 位移过渡）

## What Changes

### P1：核心游戏循环反馈
- **随从入场动画**：随从从手牌飞入基地位置，落地时有弹跳 + 轻微旋转（纸牌拍桌感）
- **行动卡打出展示**：行动卡打出后居中短暂展示（300-500ms），然后缩小滑入弃牌堆方向消失
- **基地临界点逼近**：力量 >= 80% 临界点时 token 开始脉冲抖动；达到临界点时 token 放大 + 变色 + 光晕
- **基地记分庆祝**：记分时基地卡翻转/碎裂消失，VP 数字飞向对应玩家计分板，最高分玩家短暂高亮

### P2：体验提升
- **力量变化浮字**：随从入场或力量修改时，基地力量 token 旁弹出 "+N" 手写风格浮字
- **回合/阶段切换提示**：阶段切换时便签纸翻页动画；"轮到你了"时桌面边缘短暂亮光
- **合法目标邀请效果**：选中随从时，可放置的基地边框发光/轻微上浮
- **不可操作抖动**：非自己回合点击手牌时轻微摇头抖动

### P3：锦上添花
- **抽牌动画**：抽牌时卡牌从牌库位置飞入手牌区
- **弃牌动画**：弃牌时卡牌滑向弃牌堆位置
- **随从堆叠展开**：基地上随从堆 hover 时扇形展开，方便查看

## Impact
- 影响代码：`src/games/smashup/Board.tsx`、`src/games/smashup/ui/HandArea.tsx`
- 新增文件：`src/games/smashup/ui/useGameEvents.ts`（事件流消费）、`src/games/smashup/ui/BoardEffects.tsx`（棋盘特效）
- 依赖：framer-motion（已有）、tsParticles（已有，仅记分庆祝可选用）
- 不影响领域逻辑，纯 UI 层变更
