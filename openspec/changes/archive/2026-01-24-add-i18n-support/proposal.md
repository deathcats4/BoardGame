# Change: 添加国际化（i18n）支持

## Why
平台目前仅支持中文 UI，限制了海外用户访问和社区扩展能力。添加国际化支持可以：
- 支持多语言用户群体
- 为未来的国际化运营打基础
- 提升平台的专业度和可扩展性

## What Changes
- **基础设施**：集成 `react-i18next` 作为国际化框架
- **翻译文件**：建立 `public/locales/{lang}/{namespace}.json` 结构
- **语言切换**：提供语言切换 UI 组件
- **文本迁移**：将硬编码中文文本迁移到翻译文件
- **命名空间划分**：按功能模块划分翻译命名空间（common, lobby, game, tutorial 等）

## Impact
- **受影响的 specs**：无现有 spec 需修改
- **受影响的代码**：
  - `src/main.tsx` - 初始化 i18n
  - `src/components/**/*.tsx` - 所有含硬编码文本的组件（43 个文件）
  - `src/games/**/*.tsx` - 游戏相关组件
  - `src/pages/**/*.tsx` - 页面组件
- **新增目录**：
  - `public/locales/zh-CN/` - 中文翻译
  - `public/locales/en/` - 英文翻译
  - `src/lib/i18n/` - i18n 配置

## 方案选型

### 主流方案对比

| 方案 | 优点 | 缺点 | 推荐度 |
|------|------|------|--------|
| **react-i18next** | 生态完善、社区活跃、TypeScript 支持好、支持命名空间 | 配置略复杂 | ⭐⭐⭐⭐⭐ |
| react-intl (FormatJS) | ICU 消息格式标准、日期/数字格式化强 | 学习曲线陡峭、包体积较大 | ⭐⭐⭐⭐ |
| voerka-i18n | 中文文档友好、编译时优化 | 社区较小、生态不完善 | ⭐⭐⭐ |
| 自建方案 | 完全可控 | 维护成本高、缺少成熟生态 | ⭐⭐ |

### 推荐方案：react-i18next

**理由**：
1. **社区最大**：npm 周下载量 300 万+，文档完善
2. **命名空间管理**：适合按模块组织翻译（game、lobby、common）
3. **动态加载**：按需加载翻译文件，优化首屏性能
4. **React 19 兼容**：支持最新 React Hooks API
5. **TypeScript 支持**：完善的类型定义

## 分阶段实施建议

### Phase 1: 基础设施 (MVP)
- 集成 react-i18next
- 建立翻译文件结构
- 添加语言切换组件
- 迁移通用组件文本

### Phase 2: 核心模块迁移
- 大厅模块国际化
- 游戏控制 UI 国际化
- 教程系统国际化

### Phase 3: 游戏内容国际化
- 游戏卡牌/技能文本
- 游戏规则文档

## 开放问题
1. **初始语言**：是否根据浏览器语言自动检测？(建议：是)
2. **语言持久化**：是否保存用户语言偏好到 localStorage？(建议：是)
3. **优先支持语言**：中文 + 英文？还是更多？(建议：先中英)
