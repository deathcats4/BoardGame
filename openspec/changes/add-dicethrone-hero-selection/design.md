## Context
DiceThrone 当前仅初始化 monk，缺少可选角色与选角门禁。狂战士模块已具备能力/卡牌/骰子/Token/资源定义，但未接入核心流程。

## Goals / Non-Goals
**Goals**
- 增加多角色逻辑接入（monk/barbarian）。
- 提供独立选角界面，房主点击开始后进入游戏界面。
- 所有玩家完成选角且房主开始前禁止进入正式回合阶段。
- 支持多人选择同一角色。
- 选角界面显示角色卡片、玩家面板与提示板，提供清晰提示与角色归属展示。
- 选角交互支持玩家拖拽 P1/P2 球到角色卡，玩家名颜色与球颜色一致，整体 UI 参考格斗游戏风格。

**Non-Goals**
- 不在本次变更中调整战斗/卡牌逻辑。
- 不新增更多英雄与美术资源。

## Decisions
- **选角状态放在 core**：在 `HeroState` 保存 `characterId`（允许未选状态），保证联机一致性与回放确定性。
- **引入选角阶段与房主开始门禁**：独立选角界面对应 `setup` 阶段；未选齐或房主未开始时 `canAdvance` 返回 false，满足后进入 `upkeep`。
- **初始化与资源注册**：在 domain 初始化时注册 monk+barbarian 资源/骰子定义；每名玩家按角色初始化牌库、技能、Token、资源池。
- **Token 定义合并**：`tokenDefinitions` 使用 monk+barbarian 的并集，避免玩家间 Token 定义缺失。
- **骰子定义绑定**：骰子定义随“当前行动玩家角色”切换（或在每回合/阶段切换时重建），确保 `Die.symbol` 与角色骰面一致。
- **选角界面渲染资产**：角色卡片复用头像精灵图；选中时展示玩家面板与提示板资产。

## Risks / Trade-offs
- **骰子定义切换复杂度**：共用骰子数组但角色不同，需要明确切换时机；需靠测试覆盖。
- **门禁影响流程**：引入 setup 阶段会影响现有 UI/流程，需确保默认流程仍可顺利推进。

## Migration Plan
- 先实现逻辑门禁与角色初始化（选角阶段/房主开始/角色数据）。
- 再实现选角 UI（角色卡片、拖拽球、玩家提示、房主开始）。
- 通过默认角色策略（如 setupData 传入或 dev 模式预设）保障开发可测。

## Open Questions
- 选角是否允许在对局中重选（当前计划不允许，仅 setup 阶段）。
- 是否需要在 setupData 中支持“预选角色”以用于自动化测试/快速开局。
- 房主断线或离开时，是否需要移交“开始”权限。
